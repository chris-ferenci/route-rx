<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add heatmap — add_heatmap • googleway</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Add heatmap — add_heatmap" />

<meta property="og:description" content="Adds a heatmap to a google map" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">googleway</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.1002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/googleway-vignette.html">Googleway Vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add heatmap</h1>
    
    <div class="hidden name"><code>add_heatmap.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Adds a heatmap to a google map</p>
    
    </div>

    <pre class="usage"><span class='fu'>add_heatmap</span>(<span class='no'>map</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>get_map_data</span>(<span class='no'>map</span>), <span class='kw'>lat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>lon</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>weight</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>option_gradient</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>option_dissipating</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>option_radius</span> <span class='kw'>=</span> <span class='fl'>0.01</span>, <span class='kw'>option_opacity</span> <span class='kw'>=</span> <span class='fl'>0.6</span>, <span class='kw'>layer_id</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>update_map_view</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>digits</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>legend</span> <span class='kw'>=</span> <span class='no'>F</span>,
  <span class='kw'>legend_options</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>map</th>
      <td><p>a googleway map object created from <code><a href='google_map.html'>google_map()</a></code></p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>data frame containing the data to use in the layer. If Null, the
data passed into <code><a href='google_map.html'>google_map()</a></code> will be used.</p></td>
    </tr>
    <tr>
      <th>lat</th>
      <td><p>string specifying the column of <code>data</code> containing the 'latitude'
coordinates. If left NULL, a best-guess will be made</p></td>
    </tr>
    <tr>
      <th>lon</th>
      <td><p>string specifying the column of <code>data</code> containing the 'longitude'
coordinates. If left NULL, a best-guess will be made</p></td>
    </tr>
    <tr>
      <th>weight</th>
      <td><p>string specifying the column of <code>data</code> containing the 'weight'
associated with each point. If NULL, each point will get a weight of 1.</p></td>
    </tr>
    <tr>
      <th>option_gradient</th>
      <td><p>vector of colours to use as the gradient colours. see Details</p></td>
    </tr>
    <tr>
      <th>option_dissipating</th>
      <td><p>logical Specifies whether heatmaps dissipate on zoom.
When dissipating is FALSE the radius of influence increases with zoom level to
ensure that the color intensity is preserved at any given geographic location.
When set to TRUE you will likely need a greater <code>option_radius</code> value.
Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>option_radius</th>
      <td><p>numeric. The radius of influence for each data point, in pixels.
Defaults to 0.01</p></td>
    </tr>
    <tr>
      <th>option_opacity</th>
      <td><p>The opacity of the heatmap, expressed as a number between
0 and 1. Defaults to 0.6.</p></td>
    </tr>
    <tr>
      <th>layer_id</th>
      <td><p>single value specifying an id for the layer. Use this value to
distinguish between shape layers for when using any <code>update_</code> function, and
for separating legends.</p></td>
    </tr>
    <tr>
      <th>update_map_view</th>
      <td><p>logical specifying if the map should re-centre according to
the shapes</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>integer. Use this parameter to specify how many digits (decimal places)
should be used for the latitude / longitude coordinates.</p></td>
    </tr>
    <tr>
      <th>legend</th>
      <td><p>either a logical indiciating if the legend(s) should be displayed, or
a named list indicating which colour attributes should be included in the legend.</p></td>
    </tr>
    <tr>
      <th>legend_options</th>
      <td><p>A list of options for controlling the legend.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The legend will only show if you supply a <code>weight</code> variable.</p>
<p><code>option_gradient</code> colours can be two of the R colour specifications;
either a colour name (as listed by <code><a href='https://www.rdocumentation.org/packages/grDevices/topics/colors'>colors()</a></code>, or a hexadecimal string of the
form <code>"#rrggbb"</code>).</p>
<p>The first colour in the vector will be used as the colour that fades to transparent,
and is not actually mapped to any data points (and therefore won't be included
in the legend).
The last colour in the vector will be use in the centre of the 'heat'.</p>
<p>The <code>option_gradient</code>, <code>option_dissipating</code>, <code>option_radius</code> and
<code>option_opacity</code> values apply to all points in the data.8</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='no'>map_key</span> <span class='kw'>&lt;-</span> <span class='st'>'your_api_key'</span>

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>20170417</span>)
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>tram_route</span>
<span class='no'>df</span>$<span class='no'>weight</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='no'>T</span>)

<span class='fu'><a href='google_map.html'>google_map</a></span>(<span class='kw'>key</span> <span class='kw'>=</span> <span class='no'>map_key</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>df</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>add_heatmap</span>(<span class='kw'>lat</span> <span class='kw'>=</span> <span class='st'>"shape_pt_lat"</span>, <span class='kw'>lon</span> <span class='kw'>=</span> <span class='st'>"shape_pt_lon"</span>, <span class='kw'>weight</span> <span class='kw'>=</span> <span class='st'>"weight"</span>,
              <span class='kw'>option_radius</span> <span class='kw'>=</span> <span class='fl'>0.001</span>, <span class='kw'>legend</span> <span class='kw'>=</span> <span class='no'>T</span>)

<span class='co'>## specifying different colour gradient</span>
<span class='no'>option_gradient</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>'orange'</span>, <span class='st'>'blue'</span>, <span class='st'>'mediumpurple4'</span>, <span class='st'>'snow4'</span>, <span class='st'>'thistle1'</span>)

<span class='fu'><a href='google_map.html'>google_map</a></span>(<span class='kw'>key</span> <span class='kw'>=</span> <span class='no'>map_key</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>df</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>add_heatmap</span>(<span class='kw'>lat</span> <span class='kw'>=</span> <span class='st'>"shape_pt_lat"</span>, <span class='kw'>lon</span> <span class='kw'>=</span> <span class='st'>"shape_pt_lon"</span>, <span class='kw'>weight</span> <span class='kw'>=</span> <span class='st'>"weight"</span>,
              <span class='kw'>option_radius</span> <span class='kw'>=</span> <span class='fl'>0.001</span>, <span class='kw'>option_gradient</span> <span class='kw'>=</span> <span class='no'>option_gradient</span>, <span class='kw'>legend</span> <span class='kw'>=</span> <span class='no'>T</span>)


<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by David Cooley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

